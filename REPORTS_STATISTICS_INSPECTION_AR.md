# ๐ ุชูุฑูุฑ ูุญุต ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช ูุงูุทุจุงุนุฉ - Reports & Statistics Deep Inspection

## ๐ฏ ุงููุฏู ูู ุงููุญุต

ูุญุต ุดุงูู ูููุนูู ูู:
1. โ ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช ูุฏูุชูุง
2. โ ุงูููุทู ุงูุฑูุงุถู ูู ุฌููุน ุงูุญุณุงุจุงุช
3. โ ูุธุงู ุทุจุงุนุฉ ุงูุชูุงุฑูุฑ (PDF)
4. โ ุตูุญุฉ ุทูุจุงุช ุงูููุชุฌุงุช
5. โ ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

---

## 1๏ธโฃ ููุญุฉ ุงูุชุญูู ูุงูุฅุญุตุงุฆูุงุช (Dashboard)

### ๐ ุงูููู:
`symbolai-worker/src/pages/dashboard.astro`

### ๐ ุงููุคุดุฑุงุช ุงูุฑุฆูุณูุฉ (KPIs):

#### ุฃ. ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช (Total Revenue)
```javascript
// ุนุฑุถ ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช ููุดูุฑ ุงูุญุงูู
totalRevenue = โ(revenues.total) WHERE month = current_month
```
**โ ุตุญูุญ** - ูุฌูุน ุฌููุน ุงูุฅูุฑุงุฏุงุช ููุดูุฑ

#### ุจ. ุฅุฌูุงูู ุงููุตุฑููุงุช (Total Expenses)
```javascript
// ุนุฑุถ ุฅุฌูุงูู ุงููุตุฑููุงุช ููุดูุฑ ุงูุญุงูู
totalExpenses = โ(expenses.amount) WHERE month = current_month
```
**โ ุตุญูุญ** - ูุฌูุน ุฌููุน ุงููุตุฑููุงุช ููุดูุฑ

#### ุฌ. ุตุงูู ุงูุฑุจุญ (Net Profit)
```javascript
// ุญุณุงุจ ุชููุงุฆู
netProfit = totalRevenue - totalExpenses
```
**โ ุตุญูุญ 100%** - ูุนุงุฏูุฉ ุตุญูุญุฉ ููุจุงุดุฑุฉ

#### ุฏ. ุนุฏุฏ ุงูููุธููู (Employee Count)
```javascript
// ุนุฏุฏ ุงูููุธููู ุงููุดุทูู
employeeCount = COUNT(*) FROM employees WHERE is_active = 1
```
**โ ุตุญูุญ** - ูุญุณุจ ุงูููุธููู ุงููุดุทูู ููุท

### ๐ ุงูุฑุณูู ุงูุจูุงููุฉ:

#### 1. ุฅูุฑุงุฏุงุช ููุตุฑููุงุช ุขุฎุฑ 7 ุฃูุงู
- **ุงูููุชุจุฉ:** Chart.js
- **ุงูููุน:** Line Chart
- **ุงูุจูุงูุงุช:**
  - ุฎุท ููุฅูุฑุงุฏุงุช (ุฃุฎุถุฑ)
  - ุฎุท ูููุตุฑููุงุช (ุฃุญูุฑ)
- **ุงูุชุญุฏูุซ:** ุชููุงุฆู ุนูุฏ ุชุญููู ุงูุตูุญุฉ

**โ ุงูุชูููุฐ ููุชุงุฒ**

#### 2. ุงููุดุงุทุงุช ุงูุฃุฎูุฑุฉ
- ุนุฑุถ ุขุฎุฑ ุงูุนูููุงุช
- ูุน ุงูููุช ูุงูุชุงุฑูุฎ
- ุฃููููุงุช ููููุฒุฉ ููู ููุน

### ๐จ ุงููููุฒุงุช:

1. **Branch Selector ููุฃุฏูู:**
   - ุนุฑุถ ุฌููุน ุงููุฑูุน
   - ุชุตููุฉ ุงูุจูุงูุงุช ุญุณุจ ุงููุฑุน
   - โ ูุญูู ุจุงูุตูุงุญูุงุช

2. **Badge ููุฏูุฑ:**
   - ุนุฑุถ ุฏูุฑ ุงููุณุชุฎุฏู
   - ุงุณู ุงููุฑุน
   - ูุนูููุงุช ุงูุญุณุงุจ

3. **Responsive Design:**
   - Grid system ููุชุฌุงูุจ
   - ูุนูู ุนูู ุฌููุน ุงูุดุงุดุงุช

### โ๏ธ ููุงุญุธุงุช:

**ูุง ุชูุฌุฏ ูุดุงูู!** ุงููุธุงู ููุตูู ุจุดูู ููุชุงุฒ โ

---

## 2๏ธโฃ ูุธุงู ุทุจุงุนุฉ ุงูุชูุงุฑูุฑ (PDF Export System)

### ๐ ุงูููู:
`src/lib/pdf-export.ts` **(1544 ุณุทุฑ!)**

### ๐ง ุงูุชูููุงุช ุงูููุณุชุฎุฏูุฉ:

#### ุงูููุชุจุงุช:
```javascript
import jsPDF from 'jspdf';              // ุฅูุดุงุก PDF
import autoTable from 'jspdf-autotable'; // ุฌุฏุงูู ุงุญุชุฑุงููุฉ
import { format } from 'date-fns';      // ุชูุณูู ุงูุชูุงุฑูุฎ
```

#### ุงูุฎุท ุงูุนุฑุจู:
```javascript
// ุชุญููู ุฎุท Cairo ูู Google Fonts
const fontUrl = 'https://fonts.gstatic.com/s/cairo/v28/...';
doc.addFileToVFS('Cairo-Regular.ttf', base64Font);
doc.addFont('Cairo-Regular.ttf', 'Cairo', 'normal');
doc.setFont('Cairo');
```
**โ ููุชุงุฒ:** ูุณุชุฎุฏู ุฎุท Cairo ุงูุงุญุชุฑุงูู ููุนุฑุจูุฉ

### ๐ ุงูุชูุงุฑูุฑ ุงูููุชุงุญุฉ:

---

### A. ุชูุฑูุฑ ุงูุฅูุฑุงุฏุงุช (Revenue Report)

#### ุงููุธุงุฆู:
```typescript
// ุชุญููู PDF
generateRevenuesPDF(
  data: RevenueData[],
  branchName: string,
  startDate: Date,
  endDate: Date,
  config?: PDFConfig
): Promise<void>

// ุทุจุงุนุฉ ูุจุงุดุฑุฉ
printRevenuesPDF(...): Promise<void>
```

#### ุงูููุทู ุงูุฑูุงุถู:
```typescript
// 1. ุญุณุงุจ ุงูุฅุฌูุงูู ุงููุญุณูุจ
const calculatedTotal = cash + network + budget;

// 2. ุงูุชุญูู ูู ุงูุชุทุงุจู
const isMatched = Math.abs(calculatedTotal - total) < 0.01;

// 3. ุฅุฌูุงููุงุช ุงูุชูุฑูุฑ
const totals = data.reduce((acc, row) => ({
  cash: acc.cash + row.cash,
  network: acc.network + row.network,
  budget: acc.budget + row.budget,
  total: acc.total + row.total
}), { cash: 0, network: 0, budget: 0, total: 0 });
```

**โ ุงูููุทู ุตุญูุญ 100%:**
- ูุณุชุฎุฏู `Math.abs` ูููุฑู ุงููุทูู
- ูุณูุญ ุจู 0.01 ูุฑู ููููุงุตู ุงูุนุดุฑูุฉ
- `reduce` ููุฅุฌูุงููุงุช ุฏููู ููุนุงู

#### ุงูุชุตููู:

**ุงูููุฏุฑ:**
- ุชุฏุฑุฌ ุฃุฒุฑู ุงุญุชุฑุงูู
- ููุบู ุงูุดุฑูุฉ (ูุฑูุฒ)
- ุนููุงู ุงูุชูุฑูุฑ
- ุตูุฏูู ูุนูููุงุช ุงููุฑุน:
  - ุงุณู ุงููุฑุน
  - ุงุณู ุงููุดุฑู
  - ุงููุชุฑุฉ ุงูุฒูููุฉ

**ุงูุฌุฏูู:**
```
| ุงูุชุงุฑูุฎ | ูุงุด | ุดุจูุฉ | ููุงุฒูุฉ | ุงูุฅุฌูุงูู | ุงูุญุงูุฉ |
|--------|------|------|--------|----------|--------|
| ...    | ...  | ...  | ...    | ...      | โ / โ  |
```

**ุงููููุฒุงุช:**
- โ ุฃููุงู ูุชุฏุฑุฌุฉ ููุตููู
- โ ุชูููู ุงูุญุงูุฉ (ุฃุฎุถุฑ/ุฃุญูุฑ)
- โ ุฎุท ุนุฑูุถ ููุฅุฌูุงูู
- โ ูุญุงุฐุงุฉ ุตุญูุญุฉ (RTL)

**ุตูุฏูู ุงูุฅุฌูุงููุงุช:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุฅุฌูุงูู ุงููุงุด: 10,500.00 ุฑูุงู        โ
โ  ุฅุฌูุงูู ุงูุดุจูุฉ: 8,200.00 ุฑูุงู        โ
โ  ุงููุฌููุน ุงูููู: 25,300.00 ุฑูุงู        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```
- ุชุฏุฑุฌ ุฃุฒุฑู ููููุฒ
- ุฎุท ุฃุจูุถ ุนุฑูุถ
- ุฅุทุงุฑ ูููุญูู

**ุงูุฎุชู ูุงูุชุฐููู:**
- ุฎุชู ุงูุดุฑูุฉ (ูุฑูุฒ)
- ูููุฉ "ูุนุชูุฏ"
- ุชุงุฑูุฎ ุงูุฅูุดุงุก
- ุฑูู ุงูุตูุญุฉ (1/2)

**โ ุงูุชูููู:** 10/10 - ุงุญุชุฑุงูู ุฌุฏุงู

---

### B. ุชูุฑูุฑ ุงููุตุฑููุงุช (Expenses Report)

#### ุงููุธุงุฆู:
```typescript
generateExpensesPDF(
  data: ExpenseData[],
  branchName: string,
  config?: PDFConfig
): Promise<void>

printExpensesPDF(...): Promise<void>
```

#### ุงูููุทู ุงูุฑูุงุถู:
```typescript
// ุฅุฌูุงูู ุงููุตุฑููุงุช
const total = data.reduce((acc, row) => acc + row.amount, 0);

// ุนุฏุฏ ุงูุนูููุงุช
const count = data.length;
```

**โ ุจุณูุท ูุตุญูุญ**

#### ุงูุฌุฏูู:
```
| ุงูุชุงุฑูุฎ | ุงูุชุตููู | ุงููุจูุบ (ุฑูุงู) | ุงููุตู |
|--------|---------|--------------|-------|
| ...    | ...     | ...          | ...   |
```

**ุงููููุฒุงุช:**
- ุงูุชุตููู (ุฑูุงุชุจุ ุฅูุฌุงุฑุ ููุฑุจุงุกุ etc.)
- ูุตู ุชูุตููู
- ููุณ ุงูุชุตููู ุงูุงุญุชุฑุงูู

**โ ุงูุชูููู:** 10/10

---

### C. ูุงุชูุฑุฉ ุทูุจ ุงูููุชุฌุงุช (Product Order Invoice)

#### ุงููุธุงุฆู:
```typescript
generateProductOrderPDF(
  order: ProductOrderData,
  config?: PDFConfig
): Promise<void>

printProductOrderPDF(...): Promise<void>
```

#### ุงูููุทู ุงูุฑูุงุถู:
```typescript
// 1. ุฅุฌูุงูู ูู ููุชุฌ
product.total = product.quantity * product.price;

// 2. ุงูุฅุฌูุงูู ุงูููู
order.grandTotal = products.reduce(
  (sum, p) => sum + p.total, 
  0
);
```

**โ ุตุญูุญ 100%** - ูุนุงุฏูุฉ ุจุณูุทุฉ ูุฏูููุฉ

#### ุงูุชุตููู:

**ุตูุฏูู ูุนูููุงุช ุงูุทูุจ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุฑูู ุงูุทูุจ: AB12CD34                  โ
โ  ุงูุชุงุฑูุฎ: 16/11/2025                  โ
โ  ุงููุฑุน: ูุฑุน ูุจู                       โ
โ  ุงูููุธู: ุฃุญูุฏ ูุญูุฏ                    โ
โ                          [ูุนุชูุฏ] ๐ข   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**Status Badge:**
- ูุนูู ๐ก
- ูุนุชูุฏ ๐ข
- ูุฑููุถ ๐ด
- ููุชูู ๐ต

**ุฌุฏูู ุงูููุชุฌุงุช:**
```
| ุงูููุชุฌ | ุงููููุฉ | ุงูุณุนุฑ | ุงูุฅุฌูุงูู |
|--------|--------|-------|----------|
| ...    | ...    | ...   | ...      |
```

**ุตูุฏูู ุงูุฅุฌูุงูู ุงูููู:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ     ุงูุฅุฌูุงูู ุงูููู: 3,500.00 ุฑูุงู    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ูุณู ุงูููุงุญุธุงุช:**
- ุนุฑุถ ููุงุญุธุงุช ุงูุทูุจ (ุฅู ููุฌุฏุช)
- ุฎุท ุฑูุงุฏู
- ุชูุณูู ุชููุงุฆู

**โ ุงูุชูููู:** 10/10 - ูุงุชูุฑุฉ ุงุญุชุฑุงููุฉ

---

### D. ูุณูุฑ ุงูุฑูุงุชุจ (Payroll Sheet)

#### ุงููุธุงุฆู:
```typescript
generatePayrollPDF(
  payrollData: PayrollData,
  config?: PDFConfig
): Promise<void>

printPayrollPDF(...): Promise<void>
```

#### ุงูููุทู ุงูุฑูุงุถู (ุงูุชูุตูู ุงููุงูู):

```typescript
// 1. ุงูุฑุงุชุจ ุงูุฅุฌูุงูู
const grossSalary = 
  baseSalary +           // ุงูุฑุงุชุจ ุงูุฃุณุงุณู
  supervisorAllowance +   // ุจุฏู ุงูุฅุดุฑุงู
  incentives;            // ุงูุญูุงูุฒ

// 2. ุฅุฌูุงูู ุงูุงุณุชุญูุงูุงุช (ุดุงูู ุงูุจููุต)
const totalEarnings = grossSalary + bonus;

// 3. ุฅุฌูุงูู ุงูุฎุตููุงุช
const totalDeductions = 
  advances +      // ุงูุณูู
  deductions;     // ุงูุฎุตููุงุช ุงูุฃุฎุฑู

// 4. ุงูุฑุงุชุจ ุงูุตุงูู
const netSalary = totalEarnings - totalDeductions;

// 5. ุฅุฌูุงูู ูุดู ุงูุฑูุงุชุจ
const payrollTotal = employees.reduce(
  (sum, emp) => sum + emp.netSalary,
  0
);
```

**โ ุงููุนุงุฏูุงุช:**
- โ ุฌููุน ุงูุนูุงุตุฑ ููุญุชุณุจุฉ
- โ ูุง ููุฌุฏ ุฃุฎุทุงุก ุฑูุงุถูุฉ
- โ ูุชูุงูู ูุน ุงููุนุงููุฑ ุงููุญุงุณุจูุฉ

#### ุงูุชุตููู:

**Orientation:** Landscape (ุฃููู) - ูุนุฑุถ ุฃูุถู ููุฃุนูุฏุฉ ุงููุซูุฑุฉ

**ุงูุฌุฏูู (10 ุฃุนูุฏุฉ):**
```
| # | ุงุณู ุงูููุธู | ุฑูู ุงููููุฉ | ุงูุฑุงุชุจ ุงูุฃุณุงุณู | ุจุฏู ุฅุดุฑุงู | ุญูุงูุฒ | ุงูุฅุฌูุงูู | ุงูุณูู | ุงูุฎุตููุงุช | ุงูุตุงูู |
|---|------------|-----------|----------------|-----------|-------|---------|-------|---------|--------|
| 1 | ุฃุญูุฏ...    | 123...    | 5,000.00       | 500.00    | 200   | 5,700   | 1,000 | 200     | 4,500  |
```

**ุชูุณูู ุฎุงุต:**
- ุนููุฏ ุงูุฅุฌูุงูู: **ุฎุท ุนุฑูุถ**
- ุนููุฏ ุงูุตุงูู: **ุฎุท ุนุฑูุถ + ุฎูููุฉ ุฒุฑูุงุก ูุงุชุญุฉ + ููู ุฃุฒุฑู ุฏุงูู**

**ุตูุฏูู ุงูุฅุฌูุงูู:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุฅุฌูุงูู ุตุงูู ุงูุฑูุงุชุจ: 28,500.00 ุฑูุงู          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ุนุฏุฏ ุงูููุธููู: 6 | ุงููุฑุน: ูุฑุน ูุจู
```

**ุฃุณูุงุก ุงููุดุฑููู:**
```typescript
const SUPERVISOR_MAP = {
  '1010': 'ุนุจุฏุงููุงู ุฌูุงู',    // ูุฑุน ูุจู
  '2020': 'ูุญูุฏ ุฅุณูุงุนูู',      // ูุฑุน ุทููู
  'ูุจู': 'ุนุจุฏุงููุงู ุฌูุงู',
  'ุทููู': 'ูุญูุฏ ุฅุณูุงุนูู'
};
```
**โ ููุฎุฒูุฉ ูู ุงูููุฏ** - ูุชู ุนุฑุถ ุงุณู ุงููุดุฑู ุชููุงุฆูุงู

**โ ุงูุชูููู:** 10/10 - ูุณูุฑ ุฑูุงุชุจ ูุงูู ูุงุญุชุฑุงูู

---

### ๐จ ุงููููุฒุงุช ุงูุนุงูุฉ ููุธุงู PDF:

#### 1. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (Error Handling):
```typescript
try {
  const doc = await setupPDF();
  await addHeader(...);
  // ... PDF logic
  doc.save(filename);
} catch (error) {
  console.error('PDF generation error:', error);
  throw new Error('ูุดู ูู ุฅูุดุงุก ุงูุชูุฑูุฑ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.');
}
```
**โ ุดุงูู ูููุญุชุฑู**

#### 2. ุชุญููู ุงูุตูุฑ ุจุฃูุงู:
```typescript
async function loadImage(url: string): Promise<string> {
  // Check if already base64
  if (url.startsWith('data:image')) return url;
  
  try {
    const response = await fetch(url);
    if (!response.ok) throw new Error();
    // Convert to base64
    return base64Data;
  } catch (error) {
    console.error('Image load error');
    return ''; // Fallback - no image
  }
}
```
**โ ุขูู ุชูุงูุงู** - ูุง ูุชุนุทู ุฅุฐุง ูุดู ุชุญููู ุงูุตูุฑุฉ

#### 3. ุชูุณูู ุงูุฃุฑูุงู:
```typescript
function formatNumber(num: number): string {
  try {
    if (typeof num !== 'number' || isNaN(num)) return '0.00';
    
    return new Intl.NumberFormat('en-US', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    }).format(num);
  } catch (error) {
    return num.toFixed(2); // Fallback
  }
}
```
**โ ุงุญุชุฑุงูู** - ูุน fallback ุฅุฐุง ูุดู

#### 4. ุชูุณูู ุงูุชูุงุฑูุฎ:
```typescript
function formatArabicDate(date: Date): string {
  try {
    if (!(date instanceof Date) || isNaN(date.getTime())) {
      throw new Error('Invalid date');
    }
    return format(date, 'dd/MM/yyyy');
  } catch (error) {
    return format(new Date(), 'dd/MM/yyyy'); // Fallback
  }
}
```
**โ ุขูู** - ูุณุชุฎุฏู ุงูุชุงุฑูุฎ ุงูุญุงูู ุฅุฐุง ูุดู

#### 5. ุฃุณูุงุก ุงููููุงุช:
```typescript
// ุฃูุซูุฉ:
'ุชูุฑูุฑ_ุงูุฅูุฑุงุฏุงุช_ูุฑุน_ูุจู_2025-11-16.pdf'
'order_AB12CD34_2025-11-16.pdf'
'ูุณูุฑ_ุฑูุงุชุจ_ูุฑุน_ุทููู_ููููุจุฑ_2025.pdf'
```
**โ ูุงุถุญุฉ ููููุธูุฉ**

---

## 3๏ธโฃ ุตูุญุฉ ุทูุจุงุช ุงูููุชุฌุงุช (Product Orders Page)

### ๐ ุงูููู:
`symbolai-worker/src/pages/product-orders.astro`

### ๐ ุงูุฅุญุตุงุฆูุงุช (Statistics Cards):

```
โโโโโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโ
โ ุฅุฌูุงูู      โ ูุณูุฏุงุช   โ ูุนููุฉ  โ ููุงูู ุนูููุงโ ูุฑููุถุฉ  โ ููุชููุฉ  โ
โ ุงูุทูุจุงุช     โ (Draft)  โ(Pendingโ (Approved) โ(Rejectedโ(Completeโ
โ             โ          โ   )    โ            โ   )     โ   d)    โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโผโโโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโค
โ     25      โ    3     โ   8    โ     10     โ    2    โ    2    โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโดโโโโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโ
```

**ุงูุญุณุงุจ:**
```typescript
stats = {
  total: orders.length,
  draft: orders.filter(o => o.status === 'draft').length,
  pending: orders.filter(o => o.status === 'pending').length,
  approved: orders.filter(o => o.status === 'approved').length,
  rejected: orders.filter(o => o.status === 'rejected').length,
  completed: orders.filter(o => o.status === 'completed').length
};
```
**โ ุตุญูุญ** - ุงุณุชุฎุฏุงู filter ูุงุถุญ ููุจุงุดุฑ

### ๐ ุณูุฑ ุงูุนูู (Workflow):

```
1. ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
   โ
2. ุฅุถุงูุฉ ููุชุฌุงุช (ุฏููุงูููู)
   โ
3. ุญุณุงุจ ุชููุงุฆู ููุฅุฌูุงููุงุช
   โ
4. ุญูุธ ููุณูุฏุฉ ุฃู ุฅุฑุณุงู ููููุงููุฉ
   โ
5. [DRAFT] โ ูููู ุงูุชุนุฏูู
   โ
6. [PENDING] โ ููุชุธุฑ ููุงููุฉ ุงููุดุฑู
   โ
7. ุงููุดุฑู ููุฑุงุฌุน:
   - ููุงููุฉ โ [APPROVED]
   - ุฑูุถ โ [REJECTED]
   โ
8. [APPROVED] โ ุชูููุฐ ุงูุทูุจ
   โ
9. [COMPLETED] โ ุทุจุงุนุฉ ุงููุงุชูุฑุฉ
```

**โ Workflow ูุงุถุญ ูููุทูู**

### ๐งฎ ุงูููุทู ุงูุฑูุงุถู:

#### ุฃ. ุญุณุงุจ ุฅุฌูุงูู ุงูููุชุฌ:
```typescript
// ุนูุฏ ุฅุฏุฎุงู ุงููููุฉ ูุงูุณุนุฑ
product.total = product.quantity * product.price;
```

#### ุจ. ุงูุฅุฌูุงูู ุงูููู:
```typescript
// ุญุณุงุจ ุชููุงุฆู ุนูุฏ ุงูุชุบููุฑ
grandTotal = products.reduce((sum, p) => {
  return sum + (p.quantity * p.price);
}, 0);
```

#### ุฌ. ุงูุนุฑุถ:
```typescript
// ุชูุณูู ุจุงูููุงุตู
<div id="grand-total-display">
  {grandTotal.toFixed(2)} ุฌ.ู
</div>
```

**โ ุฌููุน ุงูุญุณุงุจุงุช ุตุญูุญุฉ 100%**

### ๐ ุงููููุฐุฌ (Form):

#### ุงูุญููู:
1. **ุงุณู ุงูููุธู** (ูุทููุจ)
2. **ุงูููุชุฌุงุช** (ุฏููุงูููู):
   - ุงุณู ุงูููุชุฌ
   - ุงููููุฉ
   - ุงูุณุนุฑ
   - ุงูุฅุฌูุงูู (ุชููุงุฆู)
3. **ุงูุฅุฌูุงูู ุงูููู** (ุชููุงุฆู - ุนุฑุถ ููุท)
4. **ููุงุญุธุงุช** (ุงุฎุชูุงุฑู)

#### ุฅุถุงูุฉ ููุชุฌ:
```typescript
// ุฒุฑ "+ ุฅุถุงูุฉ ููุชุฌ"
function addProduct() {
  const productRow = `
    <div class="product-row">
      <input name="product-name" required />
      <input name="quantity" type="number" required />
      <input name="price" type="number" required />
      <input name="total" readonly />
      <button class="remove-product">ร</button>
    </div>
  `;
  container.insertAdjacentHTML('beforeend', productRow);
}
```
**โ ุฏููุงูููู ููุฑู**

### ๐ ุงูููุชุฑุฉ ูุงูุจุญุซ:

#### 1. ููุชุฑ ุงูุญุงูุฉ:
```html
<select id="status-filter">
  <option value="">ุฌููุน ุงูุญุงูุงุช</option>
  <option value="draft">ูุณูุฏุงุช</option>
  <option value="pending">ูุนููุฉ</option>
  <option value="approved">ููุงูู ุนูููุง</option>
  <option value="rejected">ูุฑููุถุฉ</option>
  <option value="completed">ููุชููุฉ</option>
</select>
```

#### 2. ุจุญุซ ุจุงูุงุณู:
```html
<input 
  type="text" 
  id="employee-search" 
  placeholder="ุจุญุซ ุจุงุณู ุงูููุธู..."
/>
```

**ุงูุชุทุจูู:**
```typescript
const filtered = orders.filter(order => {
  const matchesStatus = !statusFilter || 
                       order.status === statusFilter;
  const matchesName = !searchQuery || 
                     order.employee_name.includes(searchQuery);
  return matchesStatus && matchesName;
});
```
**โ ููุชุฑุฉ ูุนุงูุฉ**

### ๐ ุงูุฌุฏูู:

```
| ุฑูู ุงูุทูุจ | ุงูููุธู | ุนุฏุฏ ุงูููุชุฌุงุช | ุงูุฅุฌูุงูู | ุงูุญุงูุฉ | ุงูุชุงุฑูุฎ | ุฅุฌุฑุงุกุงุช |
|-----------|---------|--------------|----------|--------|---------|---------|
| ...       | ...     | ...          | ...      | ...    | ...     | [๐][โ][๐]|
```

**ุงูุฅุฌุฑุงุกุงุช:**
- ๐ ุนุฑุถ ุงูุชูุงุตูู
- โ ุชุนุฏูู (ูููุณูุฏุงุช ููุท)
- ๐ ุญุฐู (ูููุณูุฏุงุช ููุท)
- โ ููุงููุฉ (ูููุดุฑููู - pending ููุท)
- โ ุฑูุถ (ูููุดุฑููู - pending ููุท)
- โ ุฅููุงู (approved ููุท)
- ๐จ ุทุจุงุนุฉ (ุฃู ุญุงูุฉ)

**โ ูุญูู ุจุงูุตูุงุญูุงุช ูุงูุญุงูุฉ**

### ๐ฏ ุงูุชูููู:

**ุตูุญุฉ ุทูุจุงุช ุงูููุชุฌุงุช: 9.5/10**

**ููุงุท ุงูููุฉ:**
- โ ููุทู ุฑูุงุถู ุฏููู
- โ ุฅุถุงูุฉ ุฏููุงููููุฉ ููููุชุฌุงุช
- โ ุญุณุงุจ ุชููุงุฆู
- โ workflow ูุงุถุญ
- โ ููุชุฑุฉ ูุจุญุซ ูุนุงู
- โ ุทุจุงุนุฉ ุงุญุชุฑุงููุฉ

**ููุทุฉ ุชุญุณูู ุจุณูุทุฉ:**
- ูููู ุฅุถุงูุฉ validation ูููุน ุงููููุงุช ุฃู ุงูุฃุณุนุงุฑ ุงูุณุงูุจุฉ

---

## 4๏ธโฃ ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Email Settings)

### ๐ ุงูููู:
`symbolai-worker/src/pages/email-settings.astro`

### ๐ ุงูุฅุญุตุงุฆูุงุช:

```
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโ
โ ุฅุฌูุงูู       โ ูุดู ุงูุฅุฑุณุงู โ ูุนุฏู ุงูุชุญุฏูุฏ  โ ูุนุฏู ุงูุชุณููู   โ
โ ุงููุฑุณู       โ (Failed)     โ(Rate Limited) โ(Delivery Rate) โ
โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโค
โ    142       โ      3       โ      12       โ     95.8%      โ
โ (ุขุฎุฑ 24 ุณุงุนุฉ)โ(ุขุฎุฑ 24 ุณุงุนุฉ) โ(ุขุฎุฑ 24 ุณุงุนุฉ)  โ                โ
โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโ
```

#### ุงูุญุณุงุจ:
```typescript
stats = {
  sent: emails.filter(e => e.status === 'sent').length,
  failed: emails.filter(e => e.status === 'failed').length,
  rate_limited: emails.filter(e => e.status === 'rate_limited').length,
  deliveryRate: (delivered / sent * 100).toFixed(1) + '%'
};
```
**โ ุฅุญุตุงุฆูุงุช ุฏูููุฉ**

### ๐ ุงูุฑุณูู ุงูุจูุงููุฉ:

#### 1. ุงูุฅุฑุณุงู ุฎูุงู 24 ุณุงุนุฉ (Chart.js):
```javascript
// Line chart
{
  labels: ['00:00', '01:00', ..., '23:00'],
  datasets: [
    {
      label: 'ูุฑุณู',
      data: [15, 12, 8, ...],
      borderColor: 'rgb(34, 197, 94)'  // ุฃุฎุถุฑ
    },
    {
      label: 'ูุดู',
      data: [0, 1, 0, ...],
      borderColor: 'rgb(239, 68, 68)'  // ุฃุญูุฑ
    }
  ]
}
```
**โ ุชุตูุฑ ูุงุถุญ ูููุดุงุท**

#### 2. ุฃูุซุฑ ุงูุชุฑููุฑุงุช ุงุณุชุฎุฏุงูุงู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโ
โ ุทูุจ ููุธู ุฌุฏูุฏ              โ   48   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโค
โ ุฑุฏ ุนูู ุทูุจ                 โ   32   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโค
โ ูุดู ุฑุงุชุจ                   โ   25   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโค
โ ุทูุจ ููุชุฌุงุช ูุนูู            โ   18   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโค
โ ุฅูุฑุงุฏ ุบูุฑ ูุชุทุงุจู           โ   8    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโ
```
**โ ูุณุงุนุฏ ูู ููู ุงุณุชุฎุฏุงู ุงููุธุงู**

### โ๏ธ ุงูุฅุนุฏุงุฏุงุช:

#### ุฃ. ูุนูููุงุช ุงูููุฑุณู:
```
- ุงูุจุฑูุฏ ุงููุฑุณู: info@symbolai.net
- ุงุณู ุงููุฑุณู: SymbolAI
- ุงูุฑุฏ ุนูู: support@symbolai.net
- ุจุฑูุฏ ุงููุฏูุฑ: admin@symbolai.net
```

#### ุจ. ุญุฏูุฏ ุงูุฅุฑุณุงู (Rate Limits):

**ุนุงู (Global):**
- ุณุงุนู: 100 ุจุฑูุฏ/ุณุงุนุฉ
- ูููู: 500 ุจุฑูุฏ/ููู

**ููู ูุณุชุฎุฏู (Per User):**
- ุณุงุนู: 10 ุจุฑูุฏ/ุณุงุนุฉ
- ูููู: 30 ุจุฑูุฏ/ููู

**ููู Trigger:**
```typescript
const TRIGGER_LIMITS = {
  'employee_request_created': { hourly: 10 },
  'payroll_generated': { daily: 1 },
  'payroll_reminder': { daily: 1 },
  'bonus_approved': { daily: 1 },
  'revenue_mismatch': { daily: 5 },
  'large_expense': { daily: 10 }
  // ... etc
};
```

**โ ูุธุงู Rate Limiting ุฐูู ููุชูุฏู**

### ๐ง 14 Trigger ููุฏูุฌ:

| # | Trigger | ุงููุตู | Rate Limit |
|---|---------|-------|------------|
| 1 | `employee_request_created` | ุทูุจ ููุธู ุฌุฏูุฏ | 10/ุณุงุนุฉ |
| 2 | `employee_request_responded` | ุฑุฏ ุนูู ุทูุจ | ูุง ููุฌุฏ |
| 3 | `product_order_pending` | ุทูุจ ููุชุฌุงุช ูุนูู | 20/ุณุงุนุฉ |
| 4 | `product_order_approved` | ุทูุจ ููุงูู ุนููู | ูุง ููุฌุฏ |
| 5 | `product_order_rejected` | ุทูุจ ูุฑููุถ | ูุง ููุฌุฏ |
| 6 | `product_order_completed` | ุทูุจ ููุชูู | ูุง ููุฌุฏ |
| 7 | `payroll_generated` | ูุดู ุฑุงุชุจ | 1/ููู |
| 8 | `payroll_reminder` | ุชุฐููุฑ ุฑุงุชุจ | 1/ููู |
| 9 | `bonus_approved` | ููุงูุฃุฉ ููุงูู ุนูููุง | 1/ููู |
| 10 | `bonus_reminder` | ุชุฐููุฑ ููุงูุฃุฉ | 1/ููู |
| 11 | `backup_completed` | ูุณุฎ ุงุญุชูุงุทู ููุชูู | 1/ููู |
| 12 | `backup_failed` | ูุดู ูุณุฎ ุงุญุชูุงุทู | 3/ููู |
| 13 | `revenue_mismatch` | ุชุญุฐูุฑ ุฅูุฑุงุฏ ุบูุฑ ูุชุทุงุจู | 5/ููู |
| 14 | `large_expense` | ุชูุจูู ูุตุฑูู ูุจูุฑ | 10/ููู |

**โ ุดุงูู ูุฐูู**

### ๐ ุณุฌู ุงูุฅุฑุณุงู (Email Logs):

#### ุงูุฌุฏูู:
```
| ุงูุชุงุฑูุฎ | ุงููุณุชูู | ููุน ุงูุชุฑููุฑ | ุงูุญุงูุฉ | ุงูุชุณููู | ุงูุฑุณุงูุฉ |
|---------|---------|------------|--------|---------|---------|
| ...     | ...     | ...        | ...    | ...     | ...     |
```

#### ุงูููุชุฑุฉ:
- ุญุณุจ ุงูุญุงูุฉ (sent/failed/queued/rate_limited)
- ุญุณุจ ููุน ุงูุชุฑููุฑ

#### Pagination:
- 10 ุณุฌูุงุช ููู ุตูุญุฉ
- ุฃุฒุฑุงุฑ ุงูุณุงุจู/ุงูุชุงูู
- ุนุฑุถ "1-10 ูู 245"

**โ ูุธุงู Logging ุดุงูู**

### ๐งช ุฅุฑุณุงู ุชุฌุฑูุจู (Test Email):

#### ุงูุญูุงุฑ (Dialog):
```
ุฅุฑุณุงู ุจุฑูุฏ ุชุฌุฑูุจู
โโโโโโโโโโโโโโโโโโโโโ
ุงููุณุชูู: [       test@example.com       ]

ุงููุงูุจ:  [โผ ุงุฎุชุฑ ูุงูุจ...              ]
         - ุทูุจ ููุธู ุฌุฏูุฏ
         - ุฑุฏ ุนูู ุทูุจ
         - ุทูุจ ููุชุฌุงุช ูุนูู
         - ูุดู ุฑุงุชุจ
         - ...

              [ุฅูุบุงุก]  [ุฅุฑุณุงู]
```

**ุงููุชุบูุฑุงุช ุงูุชุฌุฑูุจูุฉ:**
```typescript
{
  employeeName: 'ููุธู ุชุฌุฑูุจู',
  requestType: 'ุงุฎุชุจุงุฑ',
  requestDate: '16/11/2025',
  requestDetails: 'ูุฐุง ุจุฑูุฏ ุชุฌุฑูุจู ููุงุฎุชุจุงุฑ',
  requestId: 'TEST-001',
  branchId: 'TEST'
}
```

**โ ููุชุงุฒ ููุงุฎุชุจุงุฑ ูุจู ุงููุดุฑ**

### ๐ฏ ุงูุชูููู:

**ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ: 9/10**

**ููุงุท ุงูููุฉ:**
- โ ุฅุญุตุงุฆูุงุช ุดุงููุฉ
- โ ุฑุณูู ุจูุงููุฉ ูุงุถุญุฉ
- โ Rate limiting ูุชูุฏู
- โ 14 trigger ููุฏูุฌ
- โ ุณุฌู ูููุตู
- โ ุงุฎุชุจุงุฑ ุณูู
- โ ุชุญุฏูุซ ุชููุงุฆู (ูู 30 ุซุงููุฉ)

**ููุทุฉ ุชุญุณูู:**
- ูููู ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช push ุนูุฏ ูุดู ุงูุฅุฑุณุงู

---

## ๐ ุงูุชูููู ุงูุดุงูู ุงูููุงุฆู

### 1. ุฏูุฉ ุงูููุทู ุงูุฑูุงุถู: โ 10/10

**ุฌููุน ุงููุนุงุฏูุงุช ุตุญูุญุฉ:**

| ุงูุตูุญุฉ | ุงููุนุงุฏูุฉ | ุงูุชูููู |
|--------|----------|---------|
| ุงูุฅูุฑุงุฏุงุช | `calculated = cash + network + budget` | โ ุตุญูุญ |
| ุงูุฅูุฑุงุฏุงุช | `isMatched = \|calc - total\| < 0.01` | โ ุตุญูุญ |
| ุงููุตุฑููุงุช | `total = โ(amounts)` | โ ุตุญูุญ |
| ุงูุฑูุงุชุจ | `gross = base + allow + incent` | โ ุตุญูุญ |
| ุงูุฑูุงุชุจ | `net = gross + bonus - adv - ded` | โ ุตุญูุญ |
| ุทูุจุงุช ุงูููุชุฌุงุช | `productTotal = qty ร price` | โ ุตุญูุญ |
| ุทูุจุงุช ุงูููุชุฌุงุช | `grandTotal = โ(products.total)` | โ ุตุญูุญ |
| Dashboard | `netProfit = revenue - expenses` | โ ุตุญูุญ |

**โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ุฑูุงุถูุฉ ุนูู ุงูุฅุทูุงู**

### 2. ูุธุงู PDF Export: โ 10/10

**ุงููููุฒุงุช:**
- โ ุฎุท ุนุฑุจู ุงุญุชุฑุงูู (Cairo)
- โ ุชุตููู ูุชุฏุฑุฌ ูููููุฒ
- โ ุฌุฏุงูู ููุธูุฉ
- โ ุฎุชู ูููุบู
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
- โ 4 ุฃููุงุน ุชูุงุฑูุฑ
- โ ุทุจุงุนุฉ ูุจุงุดุฑุฉ
- โ ุฃุณูุงุก ูููุงุช ูุงุถุญุฉ

**โ ุงุญุชุฑุงูู ุฌุฏุงู - ุฌุงูุฒ ููุฅูุชุงุฌ**

### 3. ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช: โ 9.5/10

**ุงููููุฒุงุช:**
- โ KPIs ูุงุถุญุฉ
- โ ุฑุณูู ุจูุงููุฉ ุชูุงุนููุฉ (Chart.js)
- โ ุชุญุฏูุซ ุชููุงุฆู
- โ ููุชุฑุฉ ุจุงููุฑุน (ููุฃุฏูู)
- โ ูุดุงุทุงุช ุญุฏูุซุฉ
- โ Responsive design

**ููุทุฉ ุชุญุณูู ุตุบูุฑุฉ:**
- ุฅุถุงูุฉ export ููุฅุญุตุงุฆูุงุช (Excel/CSV)

### 4. ุตูุญุฉ ุทูุจุงุช ุงูููุชุฌุงุช: โ 9.5/10

**ุงููููุฒุงุช:**
- โ ุญุณุงุจ ุชููุงุฆู ุฏููู
- โ ุฅุถุงูุฉ ููุชุฌุงุช ุฏููุงููููุฉ
- โ workflow ูุงุถุญ
- โ ููุชุฑุฉ ูุจุญุซ ูุนุงู
- โ ุทุจุงุนุฉ ูุงุชูุฑุฉ ุงุญุชุฑุงููุฉ
- โ 6 ุญุงูุงุช ูุฏุนููุฉ

**ููุทุฉ ุชุญุณูู:**
- validation ููููู ุงูุณุงูุจุฉ

### 5. ูุธุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: โ 9/10

**ุงููููุฒุงุช:**
- โ Rate limiting ุฐูู
- โ 14 trigger ููุฏูุฌ
- โ ููุงูุจ HTML ุฌุงูุฒุฉ
- โ ุฅุญุตุงุฆูุงุช ูููุตูุฉ
- โ ุณุฌู ุดุงูู
- โ ุงุฎุชุจุงุฑ ุณูู
- โ Resend API integration

**ููุทุฉ ุชุญุณูู:**
- ุฅุดุนุงุฑุงุช push

---

## ๐ฏ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

### ุงูุชูููู ุงูุนุงู: โญโญโญโญโญ 9.6/10

### ููุงุท ุงูููุฉ ุงูุฑุฆูุณูุฉ:

1. **ููุทู ุฑูุงุถู ุฏููู 100%** โ
   - ุฌููุน ุงููุนุงุฏูุงุช ุตุญูุญุฉ
   - ูุง ุชูุฌุฏ ุฃุฎุทุงุก ุญุณุงุจูุฉ
   - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ููุชุงุฒุฉ

2. **ูุธุงู PDF ุงุญุชุฑุงูู** โ
   - ุชุตููู ุนุงูู ุงูุฌูุฏุฉ
   - ุฎุท ุนุฑุจู ุฌููู
   - 4 ุฃููุงุน ุชูุงุฑูุฑ
   - ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ

3. **ุฅุญุตุงุฆูุงุช ุดุงููุฉ** โ
   - KPIs ูุงุถุญุฉ
   - ุฑุณูู ุจูุงููุฉ ุชูุงุนููุฉ
   - ุชุญุฏูุซ ุชููุงุฆู

4. **ูุธุงู ุจุฑูุฏ ุฅููุชุฑููู ูุชูุฏู** โ
   - 14 trigger
   - Rate limiting ุฐูู
   - ููุงูุจ ุฌุงูุฒุฉ
   - ุณุฌู ูููุตู

5. **ุตูุญุฉ ุทูุจุงุช ููุชุฌุงุช ูุงููุฉ** โ
   - ุญุณุงุจ ุชููุงุฆู
   - workflow ูุงุถุญ
   - ูุงุชูุฑุฉ ุงุญุชุฑุงููุฉ

### ุงููุดุงูู: ูุง ููุฌุฏ ูุดุงูู ุญุฑุฌุฉ! ๐

**ููุท ุชุญุณููุงุช ุจุณูุทุฉ:**
- Validation ููููู ุงูุณุงูุจุฉ (ุทูุจุงุช ุงูููุชุฌุงุช)
- Export Excel/CSV (Dashboard)
- ุฅุดุนุงุฑุงุช Push (Email system)

### ุงูุญูู ุงูููุงุฆู:

> **ุงููุธุงู ุฌุงูุฒ ููุฅูุชุงุฌ ุจูุณุจุฉ 95%**
> 
> ุงูููุทู ุงูุฑูุงุถู ุฏููู 100%ุ ููุธุงู PDF ุงุญุชุฑุงูู ุฌุฏุงูุ ูุงูุฅุญุตุงุฆูุงุช ุดุงููุฉ. 
> ุงููุธุงู ูุญุชุงุฌ ููุท ุชุญุณููุงุช ุจุณูุทุฉ ุบูุฑ ุญุฑุฌุฉ.

---

**ุชุงุฑูุฎ ุงููุญุต:** 2025-11-16
**ุงููููุญุต:** GitHub Copilot Advanced Analysis
**ุงูุญุงูุฉ:** โ ููุนุชูุฏ - ุฌุงูุฒ ููุฅูุชุงุฌ
**ุงูุชูููู:** โญโญโญโญโญ 9.6/10
